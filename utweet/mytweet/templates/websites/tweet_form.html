{% extends "layout.html" %}

{% block content %}

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <h1 class="text-center mb-4">Hey Welcome to home page</h1>
            
            <div class="card shadow">
                <div class="card-header bg-primary text-white text-center">
                    <h2 class="h4 mb-0">
                        {% if form.instance.pk %} 
                            Edit Tweet 
                        {% else %} 
                            Create Tweet
                        {% endif %}
                    </h2>
                </div>
                
                <div class="card-body p-4">
                    <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        {% for field in form %}
                        <div class="mb-3">
                            <label for="{{ field.id_for_label }}" class="form-label">
                                <strong>{{ field.label }}</strong>
                            </label>
                            
                            {% if field.name == 'text' %}
                                <textarea 
                                    class="form-control {% if field.errors %}is-invalid{% endif %}" 
                                    id="{{ field.id_for_label }}" 
                                    name="{{ field.name }}" 
                                    rows="4" 
                                    placeholder="What's happening?"
                                >{% if field.value %}{{ field.value }}{% endif %}</textarea>
                            {% else %}
                                <input 
                                    type="{{ field.field.widget.input_type }}" 
                                    class="form-control {% if field.errors %}is-invalid{% endif %}" 
                                    id="{{ field.id_for_label }}" 
                                    name="{{ field.name }}" 
                                    value="{% if field.value %}{{ field.value }}{% endif %}"
                                    {% if field.field.required %}required{% endif %}
                                >
                            {% endif %}
                            
                            {% if field.help_text %}
                                <div class="form-text">{{ field.help_text }}</div>
                            {% endif %}
                            
                            {% if field.errors %}
                                <div class="invalid-feedback">
                                    {% for error in field.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                            <a href="{% url 'tweet_list' %}" class="btn btn-secondary me-md-2">
                                <i class="bi bi-arrow-left"></i> Back to List
                            </a>
                            <button class="btn btn-warning" type="submit">
                                <i class="bi bi-check-circle"></i> Submit
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

<!-- Form validation script -->
<script>
// Form validation
(function () {
  'use strict'
  var forms = document.querySelectorAll('.needs-validation')
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
})()
</script>

{% endblock %}